<% content_for :extra_js do %>
  Products.show();
<% end %>

<% content_for :panel_subtitle, @product.title %>

<div class="btn-group pull-right btn-group-xs" style="margin-top: -60px;">
  <%= link_to products_path, title: 'Listado', class: 'btn btn-success tooltip-trigger' do %>
    <i class="fa fa-list fa-fw" aria-hidden="true"></i>
  <% end %>
</div>
<div class="btn-group pull-right btn-group-xs" style="margin-top: -30px;">
  <%= link_to @product, title: !@product.active? ? 'Activar' : 'Pausar', class: 'tooltip-trigger btn btn-primary', id: 'product_active_toggler', data: { util: 'update', hash: { product: { status: !@product.active? ? 'active' : 'paused' } } } do %>
    <i class="updating fa fa-spinner fa-pulse fa-fw"></i>
    <i class="updated fa fa-fw fa-<%= @product.active? ? 'pause' : 'play' %>" aria-hidden="true"></i>
  <% end %>
  <%= link_to edit_product_path(@product), title: 'Editar', class: 'btn btn-warning tooltip-trigger' do %>
    <i class="fa fa-pencil fa-fw" aria-hidden="true"></i>
  <% end %>
  <%= link_to clone_product_path(@product), title: 'Duplicar', method: :post, class: 'btn btn-info tooltip-trigger disable-after-click' do %>
    <i class="disabled fa fa-spinner fa-pulse fa-fw"></i>
    <i class="enabled fa fa-files-o fa-fw" aria-hidden="true"></i>
  <% end %>
  <%= link_to @product, title: 'Eliminar', class: 'btn btn-danger tooltip-trigger', method: :delete, data: { confirm: '¿Seguro?' } do %>
    <i class="fa fa-trash fa-fw" aria-hidden="true"></i>
  <% end %>
</div>

<div class="row">
  <p class="col-xs-6">
    <strong>Titulo:</strong>
    <%= @product.title %>
    <br>
    <strong>Descripción:</strong>
    <%= @product.description %>
    <br>
    <strong>Marca:</strong>
    <%= @product.brand %>
    <br>
    <strong>Categoría:</strong>
    <%= @product.category.title %>
  </p>
  <p class="col-xs-6">
    <strong>Precio:</strong>
    <%= number_to_currency(@product.price, unit: @product.currency + " ", separator: ",", delimiter: ".") %>
    <br>
    <strong>Stock:</strong>
    <%= @product.stock %>
    <br>
    <strong>Dimensiones:</strong>
    <%= @product.dimensions %>
    <br>
    <strong>Código de producto:</strong>
    <%= @product.key_code %>
  </p>
</div>

<p>
  <span id="product_active_toggler_update" class="label label-<%= @product.active? ? 'success' : @product.draft? ? 'info' : 'danger' %>">
    <%= @product.status_translated %>
  </span>
  <br>
  <strong>Tags:</strong>
  <%= @product.tags.list_to_s %>
  <br>
  <span style="white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block;">
    <strong>Link externo:</strong>
    <%= link_to @product.external_link, @product.external_link, target: '_blank' if @product.external_link.present? %>
  </span>
</p>

<div id="tabs-container" style="margin-top: 40px;">
  <ul class="nav nav-tabs" role="tablist">
    <li role="presentation" class="active">
      <a href="#images_tab" aria-controls="images_tab" role="tab" data-toggle="tab">Imágenes</a>
    </li>
    <li role="presentation">
      <a href="#characteristics_tab" aria-controls="characteristics_tab" role="tab" data-toggle="tab">Caracteristicas</a>
    </li>
    <li role="presentation">
      <a href="#data_sheet_tab" aria-controls="data_sheet_tab" role="tab" data-toggle="tab">Ficha técnica</a>
    </li>
    <li role="presentation">
      <a href="#information_tab" aria-controls="information_tab" role="tab" data-toggle="tab">Información adicional</a>
    </li>
  </ul>

  <!-- Tab panes -->
  <div class="tab-content">
    <div role="tabpanel" class="tab-pane active" id="images_tab">
      <%= render 'partials/file_picker', resource: @product %>
    </div>
    <div role="tabpanel" class="tab-pane" id="characteristics_tab">
      <p class="well">
        <%= @product.characteristics.html_safe %>
      </p>
    </div>
    <div role="tabpanel" class="tab-pane" id="data_sheet_tab">
      <p class="well">
        <%= @product.data_sheet.html_safe %>
      </p>
    </div>
    <div role="tabpanel" class="tab-pane" id="information_tab">
      <p class="well">
        <%= @product.information.html_safe %>
      </p>
    </div>
  </div>
</div>